<!DOCTYPE html>
<html lang="de">
<head><meta charset="UTF-8"><title>Disnord</title><link rel="stylesheet" href="/css/style.css"></head>
<body>
    <div class="app">
        <div class="header-bar"><div class="brand">Disnord</div></div>
        <div class="sidebar-left"><div id="server-list"></div></div>
        <div class="sidebar-mid"><div id="channel-list"># allgemein</div></div>
        <div class="main-content">
            <div id="chat-history"></div>
            <div class="msg-box">
                <input type="text" id="msg-in" class="msg-input" placeholder="Nachricht...">
                <button id="send-btn" class="btn">Senden</button>
            </div>
        </div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const user = localStorage.getItem('disnord_user') || "Gast";
        socket.emit('join-chat', user);
        document.getElementById('send-btn').onclick = () => {
            const inp = document.getElementById('msg-in');
            socket.emit('send-msg', {user, text: inp.value, target: 'allgemein'});
            inp.value = '';
        };
        socket.on('receive-msg', (msg) => {
            const div = document.createElement('div');
            div.innerHTML = `<b>${msg.user}:</b> ${msg.text}`;
            document.getElementById('chat-history').appendChild(div);
        });
    </script>
</body>
</html>
